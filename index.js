const _0x23327c=_0x41f4;(function(_0x12aa89,_0xd14cc){const _0x59667e=_0x41f4,_0x1428e1=_0x12aa89();while(!![]){try{const _0x343ad5=-parseInt(_0x59667e(0x1ed))/0x1*(parseInt(_0x59667e(0x1f0))/0x2)+-parseInt(_0x59667e(0x206))/0x3+-parseInt(_0x59667e(0x1ee))/0x4*(-parseInt(_0x59667e(0x203))/0x5)+-parseInt(_0x59667e(0x1ec))/0x6+parseInt(_0x59667e(0x1f7))/0x7+parseInt(_0x59667e(0x1ff))/0x8+parseInt(_0x59667e(0x1fd))/0x9;if(_0x343ad5===_0xd14cc)break;else _0x1428e1['push'](_0x1428e1['shift']());}catch(_0x52492e){_0x1428e1['push'](_0x1428e1['shift']());}}}(_0x2cca,0x99830));const _0x57737d=(function(){let _0x39d7c1=!![];return function(_0x182bcb,_0x1a0431){const _0x4f260f=_0x39d7c1?function(){const _0x87dbd8=_0x41f4;if(_0x1a0431){const _0x4785fe=_0x1a0431[_0x87dbd8(0x1fe)](_0x182bcb,arguments);return _0x1a0431=null,_0x4785fe;}}:function(){};return _0x39d7c1=![],_0x4f260f;};}()),_0x2e204a=_0x57737d(this,function(){const _0x2b42f=_0x41f4;return _0x2e204a[_0x2b42f(0x1f5)]()[_0x2b42f(0x1f2)](_0x2b42f(0x1f9))[_0x2b42f(0x1f5)]()['constructor'](_0x2e204a)[_0x2b42f(0x1f2)](_0x2b42f(0x1f9));});function _0x41f4(_0x13f051,_0x2ef622){const _0x493b91=_0x2cca();return _0x41f4=function(_0x4944b7,_0x58a8ae){_0x4944b7=_0x4944b7-0x1e4;let _0x2e48da=_0x493b91[_0x4944b7];return _0x2e48da;},_0x41f4(_0x13f051,_0x2ef622);}_0x2e204a();const _0x58a8ae=(function(){let _0x439a92=!![];return function(_0xde3782,_0x3fc2e2){const _0x10780b=_0x439a92?function(){if(_0x3fc2e2){const _0x3919b1=_0x3fc2e2['apply'](_0xde3782,arguments);return _0x3fc2e2=null,_0x3919b1;}}:function(){};return _0x439a92=![],_0x10780b;};}()),_0x4944b7=_0x58a8ae(this,function(){const _0x4d6e29=_0x41f4;let _0x372489;try{const _0x4db544=Function(_0x4d6e29(0x1e7)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x372489=_0x4db544();}catch(_0x1376a7){_0x372489=window;}const _0x233ce9=_0x372489['console']=_0x372489[_0x4d6e29(0x202)]||{},_0x54a095=[_0x4d6e29(0x1fc),_0x4d6e29(0x1e9),'info','error','exception',_0x4d6e29(0x1f3),_0x4d6e29(0x1ea)];for(let _0x33e66d=0x0;_0x33e66d<_0x54a095[_0x4d6e29(0x1fb)];_0x33e66d++){const _0x3a5580=_0x58a8ae[_0x4d6e29(0x1e6)][_0x4d6e29(0x1f8)]['bind'](_0x58a8ae),_0x888276=_0x54a095[_0x33e66d],_0x5b3793=_0x233ce9[_0x888276]||_0x3a5580;_0x3a5580['__proto__']=_0x58a8ae[_0x4d6e29(0x1f4)](_0x58a8ae),_0x3a5580['toString']=_0x5b3793['toString'][_0x4d6e29(0x1f4)](_0x5b3793),_0x233ce9[_0x888276]=_0x3a5580;}});function _0x2cca(){const _0xbe8254=['return\x20(function()\x20','discord.js','warn','trace','Logged\x20in\x20as\x20────────────────────────────────────────────────────────────────────────────────────────────\x0a─██████──────────██████─██████████████─████████──████████─██████████████─████████████████───\x0a─██░░██████████████░░██─██░░░░░░░░░░██─██░░░░██──██░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░░░██───\x0a─██░░░░░░░░░░░░░░░░░░██─██░░██████░░██─████░░██──██░░████─██░░██████░░██─██░░████████░░██───\x0a─██░░██████░░██████░░██─██░░██──██░░██───██░░░░██░░░░██───██░░██──██░░██─██░░██────██░░██───\x0a─██░░██──██░░██──██░░██─██░░██████░░██───████░░░░░░████───██░░██──██░░██─██░░████████░░██───\x0a─██░░██──██░░██──██░░██─██░░░░░░░░░░██─────████░░████─────██░░██──██░░██─██░░░░░░░░░░░░██───\x0a─██░░██──██████──██░░██─██░░██████░░██───────██░░██───────██░░██──██░░██─██░░██████░░████───\x0a─██░░██──────────██░░██─██░░██──██░░██───────██░░██───────██░░██──██░░██─██░░██──██░░██─────\x0a─██░░██──────────██░░██─██░░██──██░░██───────██░░██───────██░░██████░░██─██░░██──██░░██████─\x0a─██░░██──────────██░░██─██░░██──██░░██───────██░░██───────██░░░░░░░░░░██─██░░██──██░░░░░░██─\x0a─██████──────────██████─██████──██████───────██████───────██████████████─██████──██████████─\x0a────────────────────────────────────────────────────────────────────────────────────────────','7545204qznUqX','2NTppvv','9068DFchDe','listen','987812LKGkcR','username','search','table','bind','toString','user','1213562DNEZor','prototype','(((.+)+)+)+$','Project\x20Is\x20Started','length','log','18422406mwBwcs','apply','1203864CSdXKR','MAYOR\x20YouTube\x20:\x20https://youtube.com/@3mran77?\x20\x20🤍','MAYOR\x20SERVER\x20:\x20https://discord.gg/yBTBrffauG\x20💎','console','2765fNqYEK','ready','gg/mayor','2250912kHsvro','PLAYING','Done\x20Login\x20:\x20','constructor'];_0x2cca=function(){return _0xbe8254;};return _0x2cca();}_0x4944b7();const {Client,MessageEmbed,Collection,Interaction,MessageActionRow,MessageButton,MessageSelectMenu}=require(_0x23327c(0x1e8)),client=new Client({'intents':0x31ffff}),express=require('express'),app=express();app[_0x23327c(0x1ef)](()=>console[_0x23327c(0x1fc)](_0x23327c(0x1fa))),client['on'](_0x23327c(0x204),()=>{const _0x3a1920=_0x23327c;client[_0x3a1920(0x1f6)]['setActivity']({'type':_0x3a1920(0x1e4),'name':_0x3a1920(0x205)}),console[_0x3a1920(0x1fc)](_0x3a1920(0x1e5)+client[_0x3a1920(0x1f6)][_0x3a1920(0x1f1)]),console[_0x3a1920(0x1fc)](_0x3a1920(0x1eb)),console[_0x3a1920(0x1fc)](_0x3a1920(0x201)),console[_0x3a1920(0x1fc)](_0x3a1920(0x200));});
let parentId = ''// ايدي الكاتيورجي او الكتلوق الي تفتح فيه التكتات
let supportId = '' // ايدي الرتبة الي تقدر تستلم
client.on('channelCreate', cc => {
    if (cc.parent.id == parentId) {
        const embed = new MessageEmbed()
        .setDescription('**اضغط على استلام لتصبح مسؤول التكت**')
            .setColor('#CCA66A')
        const row = new MessageActionRow().addComponents(
            new MessageButton()
                .setCustomId('claimm')
                .setStyle('SUCCESS')
                .setLabel('استلام')
        )
        setTimeout(() => {
            cc.send({
                embeds: [embed],
                components: [row],
            })
        }, 2000);
    }
})

client.on('interactionCreate', async (intr) => {
    if (!intr.isButton()) return;
    const embedd = new MessageEmbed()
        .setDescription('**اِضغط على زر لتصبح مسؤول التكت**')
        .setColor('#CCA66A')
    const roww = new MessageActionRow().addComponents(
        new MessageButton()
            .setCustomId('claimm')
            .setStyle('SUCCESS')
            .setLabel('استلام'),
    )
    const rowww = new MessageActionRow().addComponents(
        new MessageButton()
            .setCustomId('unclaimm')
            .setStyle('DANGER')
            .setLabel('الغاء الاستلام'),
    )
    if (intr.customId === 'claimm') {
        if (!intr.member.roles.cache.has(supportId)) return intr.reply({
            content: 'لا يمكنك استعمال الزر!!',
            ephemeral: true
        })
        intr.message.delete().then(async (e) => {
            intr.channel.permissionOverwrites.edit(intr.guild.roles.cache.find(x => x.id == supportId), {
                'SEND_MESSAGES': false,
                'VIEW_CHANNEL': true
            }).then(async (e) => {
                intr.channel.permissionOverwrites.edit(intr.member, {
                    'VIEW_CHANNEL': true
                }).then(async (e) => {

                    const embed = new MessageEmbed()
                        .setDescription(`تم استلام التذكرة من قبل : ${intr.user}`)
                    await intr.channel.send({
                        embeds: [embed],
                        components: [rowww]
                    })
                })
            })
        })
    }
});
      client.on('interactionCreate', async (intr) => {
    if (!intr.isButton()) return;
    const embedd = new MessageEmbed()
        .setDescription('** gg/mayor اضغط على استلام لتصبح مسؤول التكت**')
        .setColor('#CCA66A')
    const roww = new MessageActionRow().addComponents(
        new MessageButton()
            .setCustomId('claimm')
            .setStyle('SUCCESS')
            .setLabel('استلام'),
    )
    const rowww = new MessageActionRow().addComponents(
        new MessageButton()
            .setCustomId('unclaimm')
            .setStyle('DANGER')
            .setLabel('الغاء الاستلام'),
    )
            if (intr.customId === 'unclaimm') {
        if (!intr.member.roles.cache.has(supportId)) return intr.reply({
            content: 'لا يمكنك استعمال الزر!!',
            ephemeral: true
        })
        intr.message.delete().then(async (e) => {
            intr.channel.permissionOverwrites.edit(intr.guild.roles.cache.find(x => x.id == supportId), {
                'SEND_MESSAGES': true,
                'VIEW_CHANNEL': true
            }).then(async (e) => {
                intr.channel.permissionOverwrites.edit(intr.member, {
                    'SEND_MESSAGES': null,
                }).then(async (e) => {

                    const embed = new MessageEmbed()
                        .setDescription(`تم ترك التذكرة يرجى انتظار اداري اخر لكي يستلم هذه التذكرة`)
                    await intr.channel.send({
                        content: `<@&${supportId}>`,
                        embeds: [embed],
                        components: [roww]
                    })
                })
            })
        })
    }
});

////////////////////

process.on("unhandledRejection", error => {
    return console.log(error)
});

///////////////////

client.login("توكن البوت")
